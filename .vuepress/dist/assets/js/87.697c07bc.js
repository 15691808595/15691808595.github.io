(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{250:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),s("p",[t._v("技术栈均是目前最新的。本文借鉴 "),s("a",{attrs:{href:"https://github.com/brickspert/blog/issues/1",target:"_blank",rel:"noopener noreferrer"}},[t._v("从零搭建React全家桶框架教程"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("webpack 4.41.2")]),t._v(" "),s("li",[t._v("Babel 7.x")]),t._v(" "),s("li",[t._v("redux 4.0.4")]),t._v(" "),s("li",[t._v("React 16.12.0")])]),t._v(" "),s("h1",{attrs:{id:"init项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#init项目"}},[t._v("#")]),t._v(" init项目")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("创建文件夹并进入")]),t._v(" "),s("p",[s("code",[t._v("mkdir react-family && cd react-family")])])]),t._v(" "),s("li",[s("p",[t._v("init npm")]),t._v(" "),s("p",[s("code",[t._v("npm init")]),t._v(" 按照提示填写项目基本信息")])])]),t._v(" "),s("h1",{attrs:{id:"webpack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[t._v("#")]),t._v(" webpack")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("安装 "),s("code",[t._v("webpack")])]),t._v(" "),s("p",[s("code",[t._v("npm install --save-dev webpack@3")])]),t._v(" "),s("p",[t._v("Q: 什么时候用"),s("code",[t._v("--save-dev")]),t._v("，什么时候用"),s("code",[t._v("--save")]),t._v("？")]),t._v(" "),s("p",[t._v("A: "),s("code",[t._v("--save-dev")]),t._v(" 是你开发时候依赖的东西，"),s("code",[t._v("--save")]),t._v(" 是你发布之后还依赖的东西。看"),s("a",{attrs:{href:"https://segmentfault.com/q/1010000005163089",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("根据"),s("a",{attrs:{href:"https://doc.webpack-china.org/guides/getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack文档"),s("OutboundLink")],1),t._v("编写最基础的配置文件")]),t._v(" "),s("p",[t._v("新建"),s("code",[t._v("webpack")]),t._v("开发配置文件 "),s("code",[t._v("touch webpack.dev.config.js")])]),t._v(" "),s("p",[s("code",[t._v("webpack.dev.config.js")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const path = require('path');\n\nmodule.exports = {\n \n    /*入口*/\n    entry: path.join(__dirname, 'src/index.js'),\n    \n    /*输出到dist文件夹，输出文件名字为bundle.js*/\n    output: {\n        path: path.join(__dirname, './dist'),\n        filename: 'bundle.js'\n    }\n};\n")])])])]),t._v(" "),s("li",[s("p",[t._v("学会使用"),s("code",[t._v("webpack")]),t._v("编译文件")]),t._v(" "),s("p",[t._v("新建入口文件")]),t._v(" "),s("p",[s("code",[t._v("mkdir src && touch ./src/index.js")])]),t._v(" "),s("p",[s("code",[t._v("src/index.js")]),t._v(" 添加内容")]),t._v(" "),s("p",[s("code",[t._v("document.getElementById('app').innerHTML = \"Webpack works\"")])]),t._v(" "),s("p",[t._v("现在我们执行命令 "),s("code",[t._v("webpack --config webpack.dev.config.js")])]),t._v(" "),s("blockquote",[s("p",[t._v("webpack如果没有全局安装，这里会报错哦。命令建议全局安装,同时需要全局安装 webpack-cli")])]),t._v(" "),s("p",[t._v("我们可以看到生成了"),s("code",[t._v("dist")]),t._v("文件夹和"),s("code",[t._v("bundle.js")]),t._v("。")])]),t._v(" "),s("li",[s("p",[t._v("现在我们测试下~")]),t._v(" "),s("p",[s("code",[t._v("dist")]),t._v("文件夹下面新建一个"),s("code",[t._v("index.html")])]),t._v(" "),s("p",[s("code",[t._v("touch ./dist/index.html")])]),t._v(" "),s("p",[s("code",[t._v("dist/index.html")]),t._v("填写内容")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<!doctype html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Document</title>\n</head>\n<body>\n<div id="app"></div>\n<script type="text/javascript" src="./bundle.js" charset="utf-8"><\/script>\n</body>\n</html>\n')])])]),s("p",[t._v("用浏览器打开"),s("code",[t._v("index.html")]),t._v(",可以看到"),s("code",[t._v("Webpack works")]),t._v("!")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://camo.githubusercontent.com/f011eda1205f66f52dea4c7d7d8ae6c0de1c8630/687474703a2f2f6f71636238646a6c772e626b742e636c6f7564646e2e636f6d2f7765627061636b2e706e67",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://camo.githubusercontent.com/f011eda1205f66f52dea4c7d7d8ae6c0de1c8630/687474703a2f2f6f71636238646a6c772e626b742e636c6f7564646e2e636f6d2f7765627061636b2e706e67",alt:"webpack"}}),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("现在回头看下，我们做了什么或者说"),s("code",[t._v("webpack")]),t._v("做了什么。")]),t._v(" "),s("p",[t._v("把入口文件 "),s("code",[t._v("index.js")]),t._v(" 经过处理之后，生成 "),s("code",[t._v("bundle.js")]),t._v("。就这么简单。")])])]),t._v(" "),s("h1",{attrs:{id:"命令优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令优化"}},[t._v("#")]),t._v(" 命令优化")]),t._v(" "),s("p",[t._v("Q：每次打包都得在根目录执行这么一长串命令"),s("code",[t._v("webpack --config webpack.dev.config.js")]),t._v(",能不打这么长吗？")]),t._v(" "),s("p",[t._v("A：修改"),s("code",[t._v("package.json")]),t._v("里面的"),s("code",[t._v("script")]),t._v("，增加"),s("code",[t._v("dev-build")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('package.json\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1",\n    "dev-build": "webpack --config webpack.dev.config.js"\n  }\n')])])]),s("p",[t._v("现在我们打包只需要执行"),s("code",[t._v("npm run dev-build")]),t._v("就可以啦！")]),t._v(" "),s("p",[t._v("参考地址：")]),t._v(" "),s("p",[t._v("http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html")]),t._v(" "),s("h1",{attrs:{id:"babel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[t._v("#")]),t._v(" babel")]),t._v(" "),s("blockquote",[s("p",[t._v("Babel 把用最新标准编写的 JavaScript 代码向下编译成可以在今天随处可用的版本。 这一过程叫做“源码到源码”编译， 也被称为转换编译。")])]),t._v(" "),s("p",[t._v("通俗的说，就是我们可以用ES6, ES7等来编写代码，Babel会把他们统统转为ES5。")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/babel/babel-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-loader"),s("OutboundLink")],1),t._v("：使用 Babel 转换 JavaScript依赖关系的 Webpack 加载器")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://babeljs.io/docs/en/babel-core",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/core"),s("OutboundLink")],1),t._v("：即 babel-core，将 ES6 代码转换为 ES5")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://babeljs.io/docs/en/babel-preset-env",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/preset-env"),s("OutboundLink")],1),t._v("：即 babel-preset-env，根据您要支持的浏览器，决定使用哪些 transformations / plugins 和 polyfills，例如为旧浏览器提供现代浏览器的新特性")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://babeljs.io/docs/en/babel-preset-react",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/preset-react"),s("OutboundLink")],1),t._v("：即 babel-preset-react，针对所有 React 插件的 Babel 预设，例如将 JSX 转换为函数")])]),t._v(" "),s("p",[t._v("**注：babel 7 使用了 "),s("code",[t._v("@babel")]),t._v(" 命名空间来区分官方包，因此以前的官方包 babel-xxx 改成了 "),s("code",[t._v("@babel/xxx")])]),t._v(" "),s("p",[s("code",[t._v("npm install --save-dev @babel/core babel-loader @babel/preset-env @babel/preset-react")])]),t._v(" "),s("p",[t._v("新建"),s("code",[t._v("babel")]),t._v("配置文件"),s("code",[t._v(".babelrc")])]),t._v(" "),s("p",[s("code",[t._v("touch .babelrc")])]),t._v(" "),s("p",[s("code",[t._v(".babelrc")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('  {\n  "presets": ["@babel/preset-env", "@babel/preset-react"]\n}\n')])])]),s("p",[t._v("修改"),s("code",[t._v("webpack.dev.config.js")]),t._v("，增加"),s("code",[t._v("babel-loader")]),t._v("！")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    /*src文件夹下面的以.js结尾的文件，要使用babel解析*/\n    /*cacheDirectory是用来缓存编译结果，下次编译加速*/\n    module: {\n        rules: [{\n            test: /\\.js$/,\n            use: ['babel-loader?cacheDirectory=true'],\n            include: path.join(__dirname, 'src')\n        }]\n    }\n")])])]),s("p",[t._v("现在我们简单测试下，是否能正确转义ES6~")]),t._v(" "),s("h1",{attrs:{id:"react"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" react")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install --save react react-dom\n")])])]),s("p",[t._v("修改 "),s("code",[t._v("src/index.js")]),t._v("使用"),s("code",[t._v("react")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import React from 'react';\nimport ReactDom from 'react-dom';\n\nReactDom.render(\n    <div>Hello React!</div>, document.getElementById('app'));\n")])])]),s("p",[t._v("执行打包命令"),s("code",[t._v("webpack --config webpack.dev.config.js")])]),t._v(" "),s("p",[t._v("打开"),s("code",[t._v("index.html")]),t._v(" 看效果。")]),t._v(" "),s("p",[t._v("我们简单做下改进，把"),s("code",[t._v("Hello React")]),t._v("放到组件里面。体现组件化~")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src\nmkdir components\ncd components\ntouch Hello.js\n")])])]),s("p",[t._v("按照React语法，写一个Hello组件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import React, {Component} from 'react';\n\nexport default class Hello extends Component {\n    render() {\n        return (\n            <div>\n                Hello,React!\n            </div>\n        )\n    }\n}\n")])])]),s("p",[t._v("然后让我们修改"),s("code",[t._v("src/index.js")]),t._v("，引用"),s("code",[t._v("Hello")]),t._v("组件！")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/index.js\nimport React from 'react';\nimport ReactDom from 'react-dom';\nimport Hello from './component/Hello';\n\nReactDom.render(\n    <Hello/>, document.getElementById('app'));\n")])])]),s("p",[t._v("在"),s("strong",[t._v("根目录")]),t._v("执行打包命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("webpack --config webpack.dev.config.js\n")])])]),s("p",[t._v("打开"),s("code",[t._v("index.html")]),t._v("看效果咯~")]),t._v(" "),s("h1",{attrs:{id:"react-router"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-router"}},[t._v("#")]),t._v(" react-router")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install --save react-router-dom\n")])])]),s("p",[t._v("新建"),s("code",[t._v("router")]),t._v("文件夹和组件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src\nmkdir router && touch router/router.js\n")])])]),s("p",[t._v("按照"),s("code",[t._v("react-router")]),s("a",{attrs:{href:"http://reacttraining.cn/web/guides/quick-start",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),s("OutboundLink")],1),t._v("编辑一个最基本的"),s("code",[t._v("router.js")]),t._v("。包含两个页面"),s("code",[t._v("home")]),t._v("和"),s("code",[t._v("page1")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/router/router.js\nimport React from 'react';\n\nimport {BrowserRouter as Router, Route, Switch, Link} from 'react-router-dom';\n\nimport Home from '../pages/Home/Home';\nimport Page1 from '../pages/Page1/Page1';\n\n\nconst getRouter = () => (\n    <Router>\n        <div>\n            <ul>\n                <li><Link to=\"/\">首页</Link></li>\n                <li><Link to=\"/page1\">Page1</Link></li>\n            </ul>\n            <Switch>\n                <Route exact path=\"/\" component={Home}/>\n                <Route path=\"/page1\" component={Page1}/>\n            </Switch>\n        </div>\n    </Router>\n);\n\nexport default getRouter;\n")])])]),s("p",[t._v("新建页面文件夹")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src\nmkdir pages\n")])])]),s("p",[t._v("新建两个页面 "),s("code",[t._v("Home")]),t._v(","),s("code",[t._v("Page1")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src/pages\nmkdir Home && touch Home/Home.js\nmkdir Page1 && touch Page1/Page1.js\n")])])]),s("p",[t._v("填充内容：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/pages/Home/Home.js\nimport React, {Component} from 'react';\n\nexport default class Home extends Component {\n    render() {\n        return (\n            <div>\n                this is home~\n            </div>\n        )\n    }\n}\n")])])]),s("p",[t._v("Page1.js")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import React, {Component} from 'react';\n\nexport default class Page1 extends Component {\n    render() {\n        return (\n            <div>\n                this is Page1~\n            </div>\n        )\n    }\n}\n")])])]),s("p",[t._v("现在路由和页面建好了，我们在入口文件"),s("code",[t._v("src/index.js")]),t._v("引用Router。")]),t._v(" "),s("p",[t._v("修改"),s("code",[t._v("src/index.js")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import React from 'react';\nimport ReactDom from 'react-dom';\n\nimport getRouter from './router/router';\n\nReactDom.render(\n    getRouter(), document.getElementById('app'));\n")])])]),s("p",[t._v("现在执行打包命令"),s("code",[t._v("npm run dev-build")]),t._v("。打开"),s("code",[t._v("index.html")]),t._v("查看效果啦！")]),t._v(" "),s("p",[t._v("那么问题来了~我们发现点击‘首页’和‘Page1’没有反应。不要惊慌，这是正常的。")]),t._v(" "),s("p",[t._v("我们之前一直用这个路径访问"),s("code",[t._v("index.html")]),t._v("，类似这样："),s("code",[t._v("file:///F:/react/react-family/dist/index.html")]),t._v("。\n这种路径了，不是我们想象中的路由那样的路径"),s("code",[t._v("http://localhost:3000")]),t._v("~我们需要配置一个简单的WEB服务器，指向\n"),s("code",[t._v("index.html")]),t._v("~有下面两种方法来实现")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("Nginx")]),t._v(", "),s("code",[t._v("Apache")]),t._v(", "),s("code",[t._v("IIS")]),t._v("等配置启动一个简单的的WEB服务器。")]),t._v(" "),s("li",[t._v("使用"),s("code",[t._v("webpack-dev-server")]),t._v("来配置启动WEB服务器。")])]),t._v(" "),s("p",[t._v("下一节，我们来使用第二种方法启动服务器。这一节的DEMO，先放这里。")]),t._v(" "),s("h1",{attrs:{id:"webpack-dev-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dev-server"}},[t._v("#")]),t._v(" webpack-dev-server")]),t._v(" "),s("p",[t._v("简单来说，"),s("code",[t._v("webpack-dev-server")]),t._v("就是一个小型的静态文件服务器。使用它，可以为"),s("code",[t._v("webpack")]),t._v("打包生成的资源文件提供Web服务。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install webpack-dev-server --save-dev\n")])])]),s("blockquote",[s("p",[t._v("2017.11.16补充：这里webpack-dev-server需要全局安装，要不后面用的时候要写相对路径。需要再执行这个 "),s("code",[t._v("npm install webpack-dev-server@2 -g")])])]),t._v(" "),s("p",[t._v("修改"),s("code",[t._v("webpack.dev.config.js")]),t._v(",增加"),s("code",[t._v("webpack-dev-server")]),t._v("的配置。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("webpack.dev.config.js\n    devServer: {\n        contentBase: path.join(__dirname, './dist')\n    }\n")])])]),s("p",[t._v("现在执行")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("webpack-dev-server --config webpack.dev.config.js\n")])])]),s("p",[t._v("浏览器打开"),s("a",{attrs:{href:"http://localhost:8080/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:8080"),s("OutboundLink")],1),t._v("，OK,现在我们可以点击"),s("code",[t._v("首页")]),t._v(","),s("code",[t._v("Page1")]),t._v("了，\n看URL地址变化啦！我们看到"),s("code",[t._v("react-router")]),t._v("已经成功了哦。")]),t._v(" "),s("p",[t._v("Q: "),s("code",[t._v("--content-base")]),t._v("是什么？")]),t._v(" "),s("p",[t._v("A："),s("code",[t._v("URL的根目录。如果不设定的话，默认指向项目根目录。")])]),t._v(" "),s("p",[s("strong",[t._v("重要提示：webpack-dev-server编译后的文件，都存储在内存中，我们并不能看见的。你可以删除之前遗留的文件dist/bundle.js，仍然能正常打开网站！")])]),t._v(" "),s("p",[t._v("每次执行"),s("code",[t._v("webpack-dev-server --config webpack.dev.config.js")]),t._v(",要打很长的命令，我们修改"),s("code",[t._v("package.json")]),t._v("，增加"),s("code",[t._v("script->start")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1",\n    "dev-build": "webpack --config webpack.dev.config.js",\n    "start": "webpack-dev-server --config webpack.dev.config.js"\n  }\n')])])]),s("p",[t._v("下次执行"),s("code",[t._v("npm start")]),t._v("就可以了。")]),t._v(" "),s("p",[t._v("既然用到了"),s("code",[t._v("webpack-dev-server")]),t._v("，我们就看看"),s("a",{attrs:{href:"https://doc.webpack-china.org/configuration/dev-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("它的其他的配置项"),s("OutboundLink")],1),t._v("。\n看了之后，发现有几个我们可以用的。")]),t._v(" "),s("ul",[s("li",[t._v("color（CLI only） "),s("code",[t._v("console")]),t._v("中打印彩色日志")]),t._v(" "),s("li",[t._v("historyApiFallback 任意的"),s("code",[t._v("404")]),t._v("响应都被替代为"),s("code",[t._v("index.html")]),t._v("。有什么用呢？你现在运行\n"),s("code",[t._v("npm start")]),t._v("，然后打开浏览器，访问"),s("code",[t._v("http://localhost:8080")]),t._v(",然后点击"),s("code",[t._v("Page1")]),t._v("到链接"),s("code",[t._v("http://localhost:8080/page1")]),t._v("，\n然后刷新页面试试。是不是发现刷新后"),s("code",[t._v("404")]),t._v("了。为什么？"),s("code",[t._v("dist")]),t._v("文件夹里面并没有"),s("code",[t._v("page1.html")]),t._v(",当然会"),s("code",[t._v("404")]),t._v("了，所以我们需要配置\n"),s("code",[t._v("historyApiFallback")]),t._v("，让所有的"),s("code",[t._v("404")]),t._v("定位到"),s("code",[t._v("index.html")]),t._v("。")]),t._v(" "),s("li",[t._v("host 指定一个"),s("code",[t._v("host")]),t._v(",默认是"),s("code",[t._v("localhost")]),t._v("。如果你希望服务器外部可以访问，指定如下："),s("code",[t._v('host: "0.0.0.0"')]),t._v("。比如你用手机通过IP访问。")]),t._v(" "),s("li",[t._v("hot 启用"),s("code",[t._v("Webpack")]),t._v("的模块热替换特性。关于热模块替换，我下一小节专门讲解一下。")]),t._v(" "),s("li",[t._v("port 配置要监听的端口。默认就是我们现在使用的"),s("code",[t._v("8080")]),t._v("端口。")]),t._v(" "),s("li",[t._v("proxy 代理。比如在 "),s("code",[t._v("localhost:3000")]),t._v(" 上有后端服务的话，你可以这样启用代理：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('    proxy: {\n      "/api": "http://localhost:3000"\n    }\n')])])]),s("ul",[s("li",[t._v("progress（CLI only） 将编译进度输出到控制台。")])]),t._v(" "),s("p",[t._v("根据这几个配置，修改下我们的"),s("code",[t._v("webpack-dev-server")]),t._v("的配置~")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("webpack.dev.config.js\n    devServer: {\n        port: 8080,\n        contentBase: path.join(__dirname, './dist'),\n        historyApiFallback: true,\n        host: '0.0.0.0'\n    }\n")])])]),s("p",[s("code",[t._v("CLI ONLY")]),t._v("的需要在命令行中配置")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('package.json\n"start": "webpack-dev-server --config webpack.dev.config.js --color --progress"\n')])])]),s("p",[t._v("现在我们执行"),s("code",[t._v("npm start")]),t._v(" 看看效果。是不是看到打包的时候有百分比进度？在"),s("code",[t._v("http://localhost:8080/page1")]),t._v("页面刷新是不是没问题了？\n用手机通过局域网IP是否可以访问到网站？")]),t._v(" "),s("h1",{attrs:{id:"模块热替换（hot-module-replacement）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块热替换（hot-module-replacement）"}},[t._v("#")]),t._v(" 模块热替换（Hot Module Replacement）")]),t._v(" "),s("p",[t._v("到目前，当我们修改代码的时候，浏览器会自动刷新，不信你可以去试试。（如果你的不会刷新，看看这个"),s("a",{attrs:{href:"https://github.com/brickspert/blog/issues/1#editor",target:"_blank",rel:"noopener noreferrer"}},[t._v("调整文本编辑器"),s("OutboundLink")],1),t._v("）")]),t._v(" "),s("p",[t._v("我相信看这个教程的人，应该用过别人的框架。我们在修改代码的时候，浏览器不会刷新，只会更新自己修改的那一块。我们也要实现这个效果。")]),t._v(" "),s("p",[t._v("我们看下"),s("a",{attrs:{href:"https://doc.webpack-china.org/guides/hot-module-replacement",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack模块热替换"),s("OutboundLink")],1),t._v("教程。")]),t._v(" "),s("p",[t._v("我们接下来要这么修改")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('package.json` 增加 `--hot\n"start": "webpack-dev-server --config webpack.dev.config.js --color --progress --hot"\n')])])]),s("p",[s("code",[t._v("src/index.js")]),t._v(" 增加"),s("code",[t._v("module.hot.accept()")]),t._v(",如下。当模块更新的时候，通知"),s("code",[t._v("index.js")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/index.js\nimport React from 'react';\nimport ReactDom from 'react-dom';\n\nimport getRouter from './router/router';\n\nif (module.hot) {\n    module.hot.accept();\n}\n\nReactDom.render(\n    getRouter(), document.getElementById('app'));\n")])])]),s("p",[t._v("现在我们执行"),s("code",[t._v("npm start")]),t._v("，打开浏览器，修改"),s("code",[t._v("Home.js")]),t._v(",看是不是不刷新页面的情况下，内容更新了？惊不惊喜？意不意外？")]),t._v(" "),s("p",[s("strong",[t._v("做模块热替换，我们只改了几行代码，非常简单的。纸老虎一个~")])]),t._v(" "),s("p",[t._v("现在我需要说明下我们命令行使用的"),s("code",[t._v("--hot")]),t._v("，可以通过配置"),s("code",[t._v("webpack.dev.config.js")]),t._v("来替换，\n向文档上那样,修改下面三处。但我们还是用"),s("code",[t._v("--hot")]),t._v("吧。下面的方式我们知道一下就行，我们不用。同样的效果。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const webpack = require('webpack');\n\ndevServer: {\n    hot: true\n}\n\nplugins:[\n     new webpack.HotModuleReplacementPlugin()\n]\n")])])]),s("p",[s("code",[t._v("HRM")]),t._v("配置其实有两种方式，一种"),s("code",[t._v("CLI")]),t._v("方式，一种"),s("code",[t._v("Node.js API")]),t._v("方式。我们用到的就是"),s("code",[t._v("CLI")]),t._v("方式，比较简单。\n"),s("code",[t._v("Node.js API")]),t._v("方式，就是建一个"),s("code",[t._v("server.js")]),t._v("等等，网上大部分教程都是这种方式，这里不做讲解了。")]),t._v(" "),s("p",[t._v("你以为模块热替换到这里就结束了？no"),s("s",[t._v("no")]),t._v("no~")]),t._v(" "),s("p",[t._v("上面的配置对"),s("code",[t._v("react")]),t._v("模块的支持不是很好哦。")]),t._v(" "),s("p",[t._v("例如下面的"),s("code",[t._v("demo")]),t._v("，当模块热替换的时候，"),s("code",[t._v("state")]),t._v("会重置，这不是我们想要的。")]),t._v(" "),s("p",[t._v("修改"),s("code",[t._v("Home.js")]),t._v(",增加计数"),s("code",[t._v("state")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/pages/Home/Home.js\nimport React, {Component} from 'react';\n\nexport default class Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            count: 0\n        }\n    }\n\n    _handleClick() {\n        this.setState({\n            count: ++this.state.count\n        });\n    }\n\n    render() {\n        return (\n            <div>\n                this is home~<br/>\n                当前计数：{this.state.count}<br/>\n                <button onClick={() => this._handleClick()}>自增</button>\n            </div>\n        )\n    }\n}\n")])])]),s("p",[t._v("你可以测试一下，当我们修改代码的时候，"),s("code",[t._v("webpack")]),t._v("在更新页面的时候，也把"),s("code",[t._v("count")]),t._v("初始为0了。")]),t._v(" "),s("p",[t._v("为了在"),s("code",[t._v("react")]),t._v("模块更新的同时，能保留"),s("code",[t._v("state")]),t._v("等页面中其他状态，我们需要引入"),s("a",{attrs:{href:"https://github.com/gaearon/react-hot-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-hot-loader"),s("OutboundLink")],1),t._v("~")]),t._v(" "),s("p",[t._v("Q:　请问"),s("code",[t._v("webpack-dev-server")]),t._v("与"),s("code",[t._v("react-hot-loader")]),t._v("两者的热替换有什么区别？")]),t._v(" "),s("p",[t._v("A: 区别在于"),s("code",[t._v("webpack-dev-serve")]),t._v("r自己的"),s("code",[t._v("--hot")]),t._v("模式只能即时刷新页面，但状态保存不住。因为"),s("code",[t._v("React")]),t._v("有一些自己语法(JSX)是"),s("code",[t._v("HotModuleReplacementPlugin")]),t._v("搞不定的。\n而"),s("code",[t._v("react-hot-loader")]),t._v("在"),s("code",[t._v("--hot")]),t._v("基础上做了额外的处理，来保证状态可以存下来。（来自"),s("a",{attrs:{href:"https://segmentfault.com/q/1010000005612845",target:"_blank",rel:"noopener noreferrer"}},[t._v("segmentfault"),s("OutboundLink")],1),t._v("）")]),t._v(" "),s("p",[t._v("下面我们来加入"),s("code",[t._v("react-hot-loader v4")]),t._v(",")]),t._v(" "),s("p",[t._v("安装依赖")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install react-hot-loader --save-dev\n")])])]),s("p",[t._v("根据"),s("a",{attrs:{href:"https://github.com/gaearon/react-hot-loader#getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),s("OutboundLink")],1),t._v("，\n我们要做如下几个修改~")]),t._v(" "),s("ol",[s("li",[s("code",[t._v(".babelrc")]),t._v(" 增加 "),s("code",[t._v("react-hot-loader/babel")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('.babelrc\n{\n  "presets": [\n    "es2015",\n    "react",\n    "stage-0"\n  ],\n  "plugins": [\n    "react-hot-loader/babel"\n  ]\n}\n')])])]),s("ol",[s("li",[s("code",[t._v("webpack.dev.config.js")]),t._v("入口增加"),s("code",[t._v("react-hot-loader/patch")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("webpack.dev.config.js\n    entry: [\n        'react-hot-loader/patch',\n        path.join(__dirname, 'src/index.js')\n    ]\n")])])]),s("ol",[s("li",[s("code",[t._v("src/index.js")]),t._v("修改如下")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/index.js\nimport React from 'react';\nimport ReactDom from 'react-dom';\n\nimport getRouter from './router/router';\n\nif (module.hot) {\n  module.hot.accept();\n}\nReactDom.render(\n  getRouter(), document.getElementById('app'));\n\n")])])]),s("p",[t._v("现在，执行"),s("code",[t._v("npm start")]),t._v("，试试。是不是修改页面的时候，"),s("code",[t._v("state")]),t._v("不更新了？")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[s("code",[t._v("src/Page1/Page1.js")]),t._v("修改如下")]),t._v(" "),s("div",{staticClass:"language-JS extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hot "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-hot-loader/root'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Home")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" is page1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("src/Home/Home.js")]),t._v(" 修改如下")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hot "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-hot-loader/root'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Home")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" is home"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        当前计数："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_handleClick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("自增"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"使用-hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-hooks"}},[t._v("#")]),t._v(" 使用 hooks")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/gaearon/react-hot-loader#hook-support",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),s("OutboundLink")],1)]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("src/Pages/Hooks/Hooks.js")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hot "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-hot-loader/root'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("useGithub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("userName")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("https://api.github.com/users/")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("userName"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("r")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("setUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("userName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useGithub")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'weibozzz'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Loading"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      Hello "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("login"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bio"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("src/router/router.js")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("BrowserRouter "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" Router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Switch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-dom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Home "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../pages/Home/Home'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Page1 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../pages/Page1/Page1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Hook "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../pages/Hooks/Hooks'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getRouter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("首页"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/page1"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Page1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hook"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hook2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Switch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route exact path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/page1"')]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Page1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hook"')]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Switch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" getRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[s("code",[t._v("webpack.dev.config.js")]),t._v(" 避免出现黄色警告")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    alias"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@hot-loader/react-dom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("ul",[s("li",[t._v("https://github.com/gatsbyjs/gatsby/issues/11934")])]),t._v(" "),s("p",[s("strong",[t._v("注意：您不能在类组件中使用 Hooks ，但是您绝对可以在组件树中，将类和函数式组件混合在一起使用。组件是类还是使用Hook的函数是该组件的实现细节")]),t._v(" http://react.html.cn/docs/hooks-faq.html")]),t._v(" "),s("h1",{attrs:{id:"文件路径优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件路径优化"}},[t._v("#")]),t._v(" 文件路径优化")]),t._v(" "),s("p",[t._v("做到这里，我们简单休息下。做下优化~")]),t._v(" "),s("p",[t._v("在之前写的代码中，我们引用组件，或者页面时候，写的是相对路径~")]),t._v(" "),s("p",[t._v("比如"),s("code",[t._v("src/router/router.js")]),t._v("里面，引用"),s("code",[t._v("Home.js")]),t._v("的时候就用的相对路径")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import Home from '../pages/Home/Home';\n")])])]),s("p",[t._v("webpack提供了一个别名配置，就是我们无论在哪个路径下，引用都可以这样")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import Home from 'pages/Home/Home';\n")])])]),s("p",[t._v("下面我们来配置下，修改"),s("code",[t._v("webpack.dev.config.js")]),t._v("，增加别名~")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("webpack.dev.config.js\n    resolve: {\n        alias: {\n            pages: path.join(__dirname, 'src/pages'),\n            component: path.join(__dirname, 'src/component'),\n            router: path.join(__dirname, 'src/router')\n        }\n    }\n")])])]),s("p",[t._v("然后我们把之前使用的绝对路径统统改掉。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/router/router.js\nimport Home from 'pages/Home/Home';\nimport Page1 from 'pages/Page1/Page1';\nsrc/index.js\nimport getRouter from 'router/router';\n")])])]),s("p",[t._v("我们这里约定，下面，我们会默认配置需要的别名路径，不再做重复的讲述哦。")]),t._v(" "),s("h1",{attrs:{id:"redux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redux"}},[t._v("#")]),t._v(" redux")]),t._v(" "),s("p",[s("code",[t._v("npm install redux -S")])]),t._v(" "),s("p",[t._v("接下来，我们就要就要就要集成"),s("code",[t._v("redux")]),t._v("了。")]),t._v(" "),s("p",[t._v("要对"),s("code",[t._v("redux")]),t._v("有一个大概的认识，可以阅读阮一峰前辈的"),s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redux 入门教程（一）：基本用法"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("如果要对"),s("code",[t._v("redux")]),t._v("有一个非常详细的认识，我推荐阅读"),s("a",{attrs:{href:"http://cn.redux.js.org/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文文档"),s("OutboundLink")],1),t._v("，写的非常好。读了这个教程，有一个非常深刻的感觉，"),s("code",[t._v("redux")]),t._v("并没有任何魔法。")]),t._v(" "),s("p",[s("strong",[t._v("不要被各种关于 reducers, middleware, store 的演讲所蒙蔽 ---- Redux 实际是非常简单的。")])]),t._v(" "),s("p",[t._v("当然，我这篇文章是写给新手的，如果看不懂上面的文章，或者不想看，没关系。先会用，多用用就知道原理了。")]),t._v(" "),s("p",[t._v("开始整代码！我们就做一个最简单的计数器。自增，自减，重置。")]),t._v(" "),s("p",[t._v("先安装"),s("code",[t._v("redux")]),t._v(" "),s("code",[t._v("npm install --save redux")])]),t._v(" "),s("p",[t._v("初始化目录结构")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src\nmkdir redux\ncd redux\nmkdir actions\nmkdir reducers\ntouch reducers.js\ntouch store.js\ntouch actions/counter.js\ntouch reducers/counter.js\n")])])]),s("p",[t._v("先来写"),s("code",[t._v("action")]),t._v("创建函数。"),s("strong",[t._v("通过action创建函数，可以创建action~")]),t._v(" "),s("code",[t._v("src/redux/actions/counter.js")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('/*action*/\n\nexport const INCREMENT = "counter/INCREMENT";\nexport const DECREMENT = "counter/DECREMENT";\nexport const RESET = "counter/RESET";\n\nexport function increment() {\n    return {type: INCREMENT}\n}\n\nexport function decrement() {\n    return {type: DECREMENT}\n}\n\nexport function reset() {\n    return {type: RESET}\n}\n')])])]),s("p",[t._v("再来写"),s("code",[t._v("reducer")]),t._v(","),s("strong",[t._v("reducer是一个纯函数，接收action和旧的state,生成新的state.")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/redux/reducers/counter.js\nimport {INCREMENT, DECREMENT, RESET} from '../actions/counter';\n\n/*\n* 初始化state\n */\n\nconst initState = {\n    count: 0\n};\n/*\n* reducer\n */\nexport default function reducer(state = initState, action) {\n    switch (action.type) {\n        case INCREMENT:\n            return {\n                count: state.count + 1\n            };\n        case DECREMENT:\n            return {\n                count: state.count - 1\n            };\n        case RESET:\n            return {count: 0};\n        default:\n            return state\n    }\n}\n")])])]),s("p",[t._v("一个项目有很多的"),s("code",[t._v("reducers")]),t._v(",我们要把他们整合到一起")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/redux/reducers.js\nimport counter from './reducers/counter';\n\nexport default function combineReducers(state = {}, action) {\n    return {\n        counter: counter(state.counter, action)\n    }\n}\n")])])]),s("p",[t._v("到这里，我们必须再理解下一句话。")]),t._v(" "),s("p",[s("strong",[t._v("reducer就是纯函数，接收state 和 action，然后返回一个新的 state。")])]),t._v(" "),s("p",[t._v("看看上面的代码，无论是"),s("code",[t._v("combineReducers")]),t._v("函数也好，还是"),s("code",[t._v("reducer")]),t._v("函数也好，都是接收"),s("code",[t._v("state")]),t._v("和"),s("code",[t._v("action")]),t._v("，\n返回更新后的"),s("code",[t._v("state")]),t._v("。区别就是"),s("code",[t._v("combineReducers")]),t._v("函数是处理整棵树，"),s("code",[t._v("reducer")]),t._v("函数是处理树的某一点。")]),t._v(" "),s("p",[t._v("接下来，我们要创建一个"),s("code",[t._v("store")]),t._v("。")]),t._v(" "),s("p",[t._v("前面我们可以使用 "),s("code",[t._v("action")]),t._v(" 来描述“发生了什么”，使用"),s("code",[t._v("action")]),t._v("创建函数来返回"),s("code",[t._v("action")]),t._v("。")]),t._v(" "),s("p",[t._v("还可以使用 "),s("code",[t._v("reducers")]),t._v(" 来根据 "),s("code",[t._v("action")]),t._v(" 更新 "),s("code",[t._v("state")]),t._v(" 。")]),t._v(" "),s("p",[t._v("那我们如何提交"),s("code",[t._v("action")]),t._v("？提交的时候，怎么才能触发"),s("code",[t._v("reducers")]),t._v("呢？")]),t._v(" "),s("p",[s("code",[t._v("store")]),t._v(" 就是把它们联系到一起的对象。"),s("code",[t._v("store")]),t._v(" 有以下职责：")]),t._v(" "),s("ul",[s("li",[t._v("维持应用的 "),s("code",[t._v("state")]),t._v("；")]),t._v(" "),s("li",[t._v("提供 "),s("code",[t._v("getState()")]),t._v(" 方法获取 "),s("code",[t._v("state")]),t._v("；")]),t._v(" "),s("li",[t._v("提供 "),s("code",[t._v("dispatch(action)")]),t._v(" 触发"),s("code",[t._v("reducers")]),t._v("方法更新 "),s("code",[t._v("state")]),t._v("；")]),t._v(" "),s("li",[t._v("通过"),s("code",[t._v("subscribe(listener)")]),t._v(" 注册监听器;")]),t._v(" "),s("li",[t._v("通过 "),s("code",[t._v("subscribe(listener)")]),t._v(" 返回的函数注销监听器。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/redux/store.js\nimport {createStore} from 'redux';\nimport combineReducers from './reducers.js';\n\nlet store = createStore(combineReducers);\n\nexport default store;\n")])])]),s("p",[t._v("到现在为止，我们已经可以使用"),s("code",[t._v("redux")]),t._v("了~")]),t._v(" "),s("p",[t._v("下面我们就简单的测试下")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src\ncd redux\ntouch testRedux.js\nsrc/redux/testRedux.js\nimport {increment, decrement, reset} from './actions/counter';\n\nimport store from './store';\n\n// 打印初始状态\nconsole.log(store.getState());\n\n// 每次 state 更新时，打印日志\n// 注意 subscribe() 返回一个函数用来注销监听器\nlet unsubscribe = store.subscribe(() =>\n    console.log(store.getState())\n);\n\n// 发起一系列 action\nstore.dispatch(increment());\nstore.dispatch(decrement());\nstore.dispatch(reset());\n\n// 停止监听 state 更新\nunsubscribe();\n")])])]),s("p",[t._v("当前文件夹执行命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("webpack testRedux.js \n\nnode dist/main.js\n")])])]),s("p",[t._v("是不是看到输出了"),s("code",[t._v("state")]),t._v("变化？")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{ counter: { count: 0 } }\n{ counter: { count: 1 } }\n{ counter: { count: 0 } }\n{ counter: { count: 0 } }\n")])])]),s("p",[t._v("做这个测试，就是为了告诉大家，"),s("code",[t._v("redux")]),t._v("和"),s("code",[t._v("react")]),t._v("没关系，虽说他俩能合作。")]),t._v(" "),s("p",[t._v("到这里，我建议你再理下"),s("code",[t._v("redux")]),t._v("的数据流，看看"),s("a",{attrs:{href:"http://cn.redux.js.org/docs/basics/DataFlow.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("ol",[s("li",[t._v("调用"),s("code",[t._v("store.dispatch(action)")]),t._v("提交"),s("code",[t._v("action")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("redux store")]),t._v("调用传入的"),s("code",[t._v("reducer")]),t._v("函数。把当前的"),s("code",[t._v("state")]),t._v("和"),s("code",[t._v("action")]),t._v("传进去。")]),t._v(" "),s("li",[t._v("根 "),s("code",[t._v("reducer")]),t._v(" 应该把多个子 "),s("code",[t._v("reducer")]),t._v(" 输出合并成一个单一的 "),s("code",[t._v("state")]),t._v(" 树。")]),t._v(" "),s("li",[s("code",[t._v("Redux store")]),t._v(" 保存了根 "),s("code",[t._v("reducer")]),t._v(" 返回的完整 "),s("code",[t._v("state")]),t._v(" 树。")])]),t._v(" "),s("p",[t._v("就是酱紫~~")]),t._v(" "),s("p",[t._v("这会"),s("code",[t._v("webpack.dev.config.js")]),t._v("路径别名增加一下，后面好写了。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("webpack.dev.config.js\n          alias: {\n              ...\n              actions: path.join(__dirname, 'src/redux/actions'),\n              reducers: path.join(__dirname, 'src/redux/reducers')\n          }\n  \n")])])]),s("p",[t._v("把前面的相对路径都改改。")]),t._v(" "),s("h3",{attrs:{id:"react-redux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-redux"}},[t._v("#")]),t._v(" react-redux")]),t._v(" "),s("p",[s("code",[t._v("npm install --save react-redux")])]),t._v(" "),s("p",[t._v("下面我们开始搭配"),s("code",[t._v("react")]),t._v("使用。")]),t._v(" "),s("p",[t._v("写一个"),s("code",[t._v("Counter")]),t._v("页面")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src/pages\nmkdir Counter\ntouch Counter/Counter.js\nsrc/pages/Counter/Counter.js\n\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("当前计数为")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("显示redux计数"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'调用自增函数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("自增\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'调用自减函数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("自减\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'调用重置函数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("重置\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("修改路由，增加"),s("code",[t._v("Counter")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// src/router/router.js\n\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("BrowserRouter "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" Router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Switch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-dom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Home "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../pages/Home/Home'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Page1 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../pages/Page1/Page1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Hook "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../pages/Hooks/Hooks'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Counter "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pages/Counter/Counter'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getRouter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("首页"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/page1"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Page1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hook"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hook2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/counter"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Counter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("li"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Switch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route exact path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/page1"')]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Page1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hook"')]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/counter"')]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Counter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Switch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" getRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n")])])]),s("p",[t._v("npm start`看看效果。")]),t._v(" "),s("p",[t._v("下一步，我们让"),s("code",[t._v("Counter")]),t._v("组件和"),s("code",[t._v("Redux")]),t._v("联合起来。使"),s("code",[t._v("Counter")]),t._v("能获得到"),s("code",[t._v("Redux")]),t._v("的"),s("code",[t._v("state")]),t._v("，并且能发射"),s("code",[t._v("action")]),t._v("。")]),t._v(" "),s("p",[t._v("当然我们可以使用刚才测试"),s("code",[t._v("testRedux")]),t._v("的方法，手动监听~手动引入"),s("code",[t._v("store")]),t._v("~但是这肯定很麻烦哦。")]),t._v(" "),s("p",[s("code",[t._v("react-redux")]),t._v("提供了一个方法"),s("code",[t._v("connect")]),t._v("。")]),t._v(" "),s("blockquote",[s("p",[t._v("容器组件就是使用 store.subscribe() 从 Redux state 树中读取部分数据，并通过 props 来把这些数据提供给要渲染的组件。你可以手工来开发容器组件，但建议使用 React Redux 库的 connect() 方法来生成，这个方法做了性能优化来避免很多不必要的重复渲染。")])]),t._v(" "),s("p",[s("code",[t._v("connect")]),t._v("接收两个参数，一个"),s("code",[t._v("mapStateToProps")]),t._v(",就是把"),s("code",[t._v("redux")]),t._v("的"),s("code",[t._v("state")]),t._v("，转为组件的"),s("code",[t._v("Props")]),t._v("，还有一个参数是"),s("code",[t._v("mapDispatchToprops")]),t._v(",\n就是把发射"),s("code",[t._v("actions")]),t._v("的方法，转为"),s("code",[t._v("Props")]),t._v("属性函数。")]),t._v(" "),s("p",[t._v("先来安装"),s("code",[t._v("react-redux")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/pages/Counter/Counter.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("increment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" decrement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'actions/counter'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("connect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-redux'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("当前计数为")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("increment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("自增\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decrement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("自减\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("重置\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mapStateToProps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    counter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mapDispatchToProps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("decrement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("reset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mapStateToProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mapDispatchToProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Counter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("p",[t._v("下面我们要传入"),s("code",[t._v("store")])]),t._v(" "),s("blockquote",[s("p",[t._v("所有容器组件都可以访问 Redux store，所以可以手动监听它。一种方式是把它以 props 的形式传入到所有容器组件中。但这太麻烦了，因为必须要用 store 把展示组件包裹一层，仅仅是因为恰好在组件树中渲染了一个容器组件。")])]),t._v(" "),s("blockquote",[s("p",[t._v("建议的方式是使用指定的 React Redux 组件 来 魔法般的 让所有容器组件都可以访问 store，而不必显示地传递它。只需要在渲染根组件时使用即可。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// src/index.js\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ReactDom "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-redux'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./redux/store'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" getRouter "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./router/router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("accept")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderWithHotReload")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderWithHotReload")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("RootElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ReactDom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Provider store"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("RootElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Provider"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("到这里我们就可以执行"),s("code",[t._v("npm start")]),t._v("，打开localhost:8080/counter看效果了。")]),t._v(" "),s("p",[t._v("这里我们再缕下（可以读"),s("a",{attrs:{href:"http://taobaofed.org/blog/2016/08/18/react-redux-connect/",target:"_blank",rel:"noopener noreferrer"}},[t._v("React 实践心得：react-redux 之 connect 方法详解"),s("OutboundLink")],1),t._v("）")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("Provider")]),t._v("组件是让所有的组件可以访问到"),s("code",[t._v("store")]),t._v("。不用手动去传。也不用手动去监听。")]),t._v(" "),s("li",[s("code",[t._v("connect")]),t._v("函数作用是从 "),s("code",[t._v("Redux state")]),t._v(" 树中读取部分数据，并通过 props 来把这些数据提供给要渲染的组件。也传递"),s("code",[t._v("dispatch(action)")]),t._v("函数到"),s("code",[t._v("props")]),t._v("。")])]),t._v(" "),s("p",[t._v("接下来，我们要说异步"),s("code",[t._v("action")])]),t._v(" "),s("p",[t._v("参考地址： http://cn.redux.js.org/docs/advanced/AsyncActions.html")]),t._v(" "),s("p",[t._v("想象一下我们调用一个异步"),s("code",[t._v("get")]),t._v("请求去后台请求数据：")]),t._v(" "),s("ol",[s("li",[t._v("请求开始的时候，界面转圈提示正在加载。"),s("code",[t._v("isLoading")]),t._v("置为"),s("code",[t._v("true")]),t._v("。")]),t._v(" "),s("li",[t._v("请求成功，显示数据。"),s("code",[t._v("isLoading")]),t._v("置为"),s("code",[t._v("false")]),t._v(","),s("code",[t._v("data")]),t._v("填充数据。")]),t._v(" "),s("li",[t._v("请求失败，显示失败。"),s("code",[t._v("isLoading")]),t._v("置为"),s("code",[t._v("false")]),t._v("，显示错误信息。")])]),t._v(" "),s("p",[t._v("下面，我们以向后台请求用户基本信息为例。")]),t._v(" "),s("ol",[s("li",[t._v("我们先创建一个"),s("code",[t._v("user.json")]),t._v("，等会请求用，相当于后台的API接口。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('cd dist\nmkdir api\ncd api\ntouch user.json\ndist/api/user.json\n{\n  "name": "brickspert",\n  "intro": "please give me a star"\n}\n')])])]),s("ol",[s("li",[t._v("创建必须的"),s("code",[t._v("action")]),t._v("创建函数。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('cd src/redux/actions\ntouch userInfo.js\nsrc/redux/actions/userInfo.js\nexport const GET_USER_INFO_REQUEST = "userInfo/GET_USER_INFO_REQUEST";\nexport const GET_USER_INFO_SUCCESS = "userInfo/GET_USER_INFO_SUCCESS";\nexport const GET_USER_INFO_FAIL = "userInfo/GET_USER_INFO_FAIL";\n\nfunction getUserInfoRequest() {\n    return {\n        type: GET_USER_INFO_REQUEST\n    }\n}\n\nfunction getUserInfoSuccess(userInfo) {\n    return {\n        type: GET_USER_INFO_SUCCESS,\n        userInfo: userInfo\n    }\n}\n\nfunction getUserInfoFail() {\n    return {\n        type: GET_USER_INFO_FAIL\n    }\n}\n')])])]),s("p",[t._v("我们创建了请求中，请求成功，请求失败三个"),s("code",[t._v("action")]),t._v("创建函数。")]),t._v(" "),s("ol",[s("li",[t._v("创建"),s("code",[t._v("reducer")])])]),t._v(" "),s("p",[t._v("再强调下，"),s("code",[t._v("reducer")]),t._v("是根据"),s("code",[t._v("state")]),t._v("和"),s("code",[t._v("action")]),t._v("生成新"),s("code",[t._v("state")]),t._v("的"),s("strong",[t._v("纯函数")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src/redux/reducers\ntouch userInfo.js\nsrc/redux/reducers/userInfo.js\nimport {GET_USER_INFO_REQUEST, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAIL} from 'actions/userInfo';\n\n\nconst initState = {\n    isLoading: false,\n    userInfo: {},\n    errorMsg: ''\n};\n\nexport default function reducer(state = initState, action) {\n    switch (action.type) {\n        case GET_USER_INFO_REQUEST:\n            return {\n                ...state,\n                isLoading: true,\n                userInfo: {},\n                errorMsg: ''\n            };\n        case GET_USER_INFO_SUCCESS:\n            return {\n                ...state,\n                isLoading: false,\n                userInfo: action.userInfo,\n                errorMsg: ''\n            };\n        case GET_USER_INFO_FAIL:\n            return {\n                ...state,\n                isLoading: false,\n                userInfo: {},\n                errorMsg: '请求错误'\n            };\n        default:\n            return state;\n    }\n}\n")])])]),s("p",[s("strong",[t._v("这里的...state语法，是和别人的Object.assign()起同一个作用，合并新旧state。我们这里是没效果的，但是我建议都写上这个哦")])]),t._v(" "),s("p",[t._v("组合"),s("code",[t._v("reducer")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/redux/reducers.js\nimport counter from 'reducers/counter';\nimport userInfo from 'reducers/userInfo';\n\nexport default function combineReducers(state = {}, action) {\n    return {\n        counter: counter(state.counter, action),\n        userInfo: userInfo(state.userInfo, action)\n    }\n}\n")])])]),s("ol",[s("li",[s("p",[t._v("现在有了")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("action\n")])])]),s("p",[t._v("，有了")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("reducer\n")])])]),s("p",[t._v("，我们就需要调用把")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("action\n")])])]),s("p",[t._v("里面的三个")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("action\n")])])]),s("p",[t._v("函数和网络请求结合起来。")]),t._v(" "),s("ul",[s("li",[t._v("请求中 "),s("code",[t._v("dispatch getUserInfoRequest")])]),t._v(" "),s("li",[t._v("请求成功 "),s("code",[t._v("dispatch getUserInfoSuccess")])]),t._v(" "),s("li",[t._v("请求失败 "),s("code",[t._v("dispatch getUserInfoFail")])])])])]),t._v(" "),s("p",[s("code",[t._v("src/redux/actions/userInfo.js")]),t._v("增加")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("export function getUserInfo() {\n    return function (dispatch) {\n        dispatch(getUserInfoRequest());\n\n        return fetch('http://localhost:8080/api/user.json')\n            .then((response => {\n                return response.json()\n            }))\n            .then((json) => {\n                    dispatch(getUserInfoSuccess(json))\n                }\n            ).catch(\n                () => {\n                    dispatch(getUserInfoFail());\n                }\n            )\n    }\n}\n")])])]),s("p",[t._v("我们这里发现，别的"),s("code",[t._v("action")]),t._v("创建函数都是返回"),s("code",[t._v("action")]),t._v("对象：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{type: xxxx}\n")])])]),s("p",[t._v("但是我们现在的这个"),s("code",[t._v("action")]),t._v("创建函数 "),s("code",[t._v("getUserInfo")]),t._v("则是返回函数了。")]),t._v(" "),s("p",[t._v("为了让"),s("code",[t._v("action")]),t._v("创建函数除了返回"),s("code",[t._v("action")]),t._v("对象外，还可以返回函数，我们需要引用"),s("code",[t._v("redux-thunk")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install --save redux-thunk\n")])])]),s("p",[t._v("这里涉及到"),s("code",[t._v("redux")]),t._v("中间件"),s("code",[t._v("middleware")]),t._v("，我后面会讲到的。你也可以读这里"),s("a",{attrs:{href:"http://cn.redux.js.org/docs/advanced/Middleware.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Middleware"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("简单的说，中间件就是"),s("code",[t._v("action")]),t._v("在到达"),s("code",[t._v("reducer")]),t._v("，先经过中间件处理。我们之前知道"),s("code",[t._v("reducer")]),t._v("能处理的"),s("code",[t._v("action")]),t._v("只有这样的"),s("code",[t._v("{type:xxx}")]),t._v("，所以我们使用中间件来处理\n函数形式的"),s("code",[t._v("action")]),t._v("，把他们转为标准的"),s("code",[t._v("action")]),t._v("给"),s("code",[t._v("reducer")]),t._v("。这是"),s("code",[t._v("redux-thunk")]),t._v("的作用。\n使用"),s("code",[t._v("redux-thunk")]),t._v("中间件")]),t._v(" "),s("p",[t._v("我们来引入"),s("code",[t._v("redux-thunk")]),t._v("中间件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/redux/store.js\nimport {createStore, applyMiddleware} from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport combineReducers from './reducers.js';\n\nlet store = createStore(combineReducers, applyMiddleware(thunkMiddleware));\n\nexport default store;\n")])])]),s("p",[t._v("到这里，"),s("code",[t._v("redux")]),t._v("这边OK了，我们来写个组件验证下。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src/pages\nmkdir UserInfo\ncd UserInfo\ntouch UserInfo.js\nsrc/pages/UserInfo/UserInfo.js\nimport React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport {getUserInfo} from \"actions/userInfo\";\n\nclass UserInfo extends Component {\n\n    render() {\n        const {userInfo, isLoading, errorMsg} = this.props.userInfo;\n        return (\n            <div>\n                {\n                    isLoading ? '请求信息中......' :\n                        (\n                            errorMsg ? errorMsg :\n                                <div>\n                                    <p>用户信息：</p>\n                                    <p>用户名：{userInfo.name}</p>\n                                    <p>介绍：{userInfo.intro}</p>\n                                </div>\n                        )\n                }\n                <button onClick={() => this.props.getUserInfo()}>请求用户信息</button>\n            </div>\n        )\n    }\n}\n\nexport default connect((state) => ({userInfo: state.userInfo}), {getUserInfo})(UserInfo);\n")])])]),s("p",[t._v("这里你可能发现"),s("code",[t._v("connect")]),t._v("参数写法不一样了，"),s("code",[t._v("mapStateToProps")]),t._v("函数用了"),s("code",[t._v("es6")]),t._v("简写，"),s("code",[t._v("mapDispatchToProps")]),t._v("用了"),s("code",[t._v("react-redux")]),t._v("提供的简单写法。")]),t._v(" "),s("p",[t._v("增加路由\n"),s("code",[t._v("src/router/router.js")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('import React from \'react\';\n\nimport {BrowserRouter as Router, Route, Switch, Link} from \'react-router-dom\';\nimport Home from \'../pages/Home/Home\';\nimport Page1 from \'../pages/Page1/Page1\';\nimport Hook from \'../pages/Hooks/Hooks\'\nimport UserInfo from \'pages/UserInfo/UserInfo\';\nimport Counter from \'pages/Counter/Counter\';\n\n\nconst getRouter = () => (\n  <Router>\n    <div>\n      <ul>\n        <li><Link to="/">首页</Link></li>\n        <li><Link to="/page1">Page1</Link></li>\n        <li><Link to="/hook">Hook2</Link></li>\n        <li><Link to="/counter">Counter</Link></li>\n        <li><Link to="/userInfo">UserInfo</Link></li>\n      </ul>\n      <Switch>\n        <Route exact path="/" component={Home}/>\n        <Route path="/page1" component={Page1}/>\n        <Route path="/hook" component={Hook}/>\n        <Route path="/counter" component={Counter}/>\n        <Route path="/userInfo" component={UserInfo}/>\n      </Switch>\n    </div>\n  </Router>\n);\n\nexport default getRouter;\n\n')])])]),s("p",[t._v("现在你可以执行"),s("code",[t._v("npm start")]),t._v("去看效果啦！")]),t._v(" "),s("p",[t._v("到这里"),s("code",[t._v("redux")]),t._v("集成基本告一段落了，后面我们还会有一些优化。")]),t._v(" "),s("h2",{attrs:{id:"combinreducers优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#combinreducers优化"}},[t._v("#")]),t._v(" combinReducers优化")]),t._v(" "),s("p",[s("code",[t._v("redux")]),t._v("提供了一个"),s("code",[t._v("combineReducers")]),t._v("函数来合并"),s("code",[t._v("reducer")]),t._v("，不用我们自己合并哦。写起来简单，但是意思和我们\n自己写的"),s("code",[t._v("combinReducers")]),t._v("也是一样的。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/redux/reducers.js\nimport {combineReducers} from \"redux\";\n\nimport counter from 'reducers/counter';\nimport userInfo from 'reducers/userInfo';\n\n\nexport default combineReducers({\n    counter,\n    userInfo\n});\n")])])]),s("h1",{attrs:{id:"devtool优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#devtool优化"}},[t._v("#")]),t._v(" devtool优化")]),t._v(" "),s("p",[t._v("现在我们发现一个问题，代码哪里写错了，浏览器报错只报在"),s("code",[t._v("build.js")]),t._v("第几行。")]),t._v(" "),s("p",[t._v("这让我们分析错误无从下手。看"),s("a",{attrs:{href:"https://doc.webpack-china.org/configuration/devtool",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("我们增加"),s("code",[t._v("webpack")]),t._v("配置"),s("code",[t._v("devtool")]),t._v("！")]),t._v(" "),s("p",[s("code",[t._v("webpack.dev.config.js")]),t._v("增加")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("devtool: 'inline-source-map'\n")])])]),s("h1",{attrs:{id:"编译css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译css"}},[t._v("#")]),t._v(" 编译css")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install css-loader style-loader --save-dev\n")])])]),s("p",[s("code",[t._v("css-loader")]),t._v("使你能够使用类似"),s("code",[t._v("@import")]),t._v(" 和 "),s("code",[t._v("url(...)")]),t._v("的方法实现 "),s("code",[t._v("require()")]),t._v("的功能；")]),t._v(" "),s("p",[s("code",[t._v("style-loader")]),t._v("将所有的计算后的样式加入页面中； 二者组合在一起使你能够把样式表嵌入"),s("code",[t._v("webpack")]),t._v("打包后的JS文件中。")]),t._v(" "),s("p",[s("code",[t._v("webpack.dev.config.js")]),t._v(" "),s("code",[t._v("rules")]),t._v("增加")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{\n   test: /\\.css$/,\n   use: ['style-loader', 'css-loader']\n}\n")])])]),s("p",[t._v("我们用"),s("code",[t._v("Page1")]),t._v("页面来测试下")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src/pages/Page1\ntouch Page1.css\nsrc/pages/Page1/Page1.css\n.page-box {\n    border: 1px solid red;\n}\nsrc/pages/Page1/Page1.js\nimport React, {Component} from 'react';\n\nimport './Page1.css';\n\nexport default class Page1 extends Component {\n    render() {\n        return (\n            <div className=\"page-box\">\n                this is page1~\n            </div>\n        )\n    }\n}\n")])])]),s("p",[t._v("好了，现在"),s("code",[t._v("npm start")]),t._v("去看效果吧。")]),t._v(" "),s("h1",{attrs:{id:"编译less"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译less"}},[t._v("#")]),t._v(" 编译less")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://webpack.docschina.org/loaders/less-loader/#%E8%A6%81%E6%B1%82",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://webpack.docschina.org/loaders/less-loader/#%E8%A6%81%E6%B1%82"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("先说这里为什么不用"),s("code",[t._v("scss")]),t._v("，因为"),s("code",[t._v("Windows")]),t._v("使用"),s("code",[t._v("node-sass")]),t._v("，需要先安装"),s("a",{attrs:{href:"https://www.microsoft.com/en-us/download/details.aspx?id=8279",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Microsoft Windows SDK for Windows 7 and .NET Framework 4"),s("OutboundLink")],1),t._v("。\n我怕有些人copy这份代码后，没注意，运行不起来。所以这里不用"),s("code",[t._v("scss")]),t._v("了，如果需要，自行编译哦。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install less less-loader --save-dev\n")])])]),s("p",[s("code",[t._v("css-loader")]),t._v("使你能够使用类似"),s("code",[t._v("@import")]),t._v(" 和 "),s("code",[t._v("url(...)")]),t._v("的方法实现 "),s("code",[t._v("require()")]),t._v("的功能；")]),t._v(" "),s("p",[s("code",[t._v("style-loader")]),t._v("将所有的计算后的样式加入页面中； 二者组合在一起使你能够把样式表嵌入"),s("code",[t._v("webpack")]),t._v("打包后的JS文件中。")]),t._v(" "),s("p",[s("code",[t._v("webpack.dev.config.js")]),t._v(" "),s("code",[t._v("rules")]),t._v("增加")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{\n   test: /\\.less$/,\n   use: ['style-loader', 'css-loader', 'less-loader']\n}\n")])])]),s("p",[t._v("我们用"),s("code",[t._v("Page1")]),t._v("页面来测试下")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src/pages/Page1\ntouch Page1.css\nsrc/pages/Page1/Page1.less\n.page-box {\n    border: 1px solid green;\n}\nsrc/pages/Page1/Page1.js\nimport React, {Component} from 'react';\n\nimport './Page1.css';\n\nexport default class Page1 extends Component {\n    render() {\n        return (\n            <div className=\"page-box\">\n                this is page1~\n            </div>\n        )\n    }\n}\n")])])]),s("p",[t._v("好了，现在"),s("code",[t._v("npm start")]),t._v("去看效果吧。")]),t._v(" "),s("h1",{attrs:{id:"编译图片"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译图片"}},[t._v("#")]),t._v(" 编译图片")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install --save-dev url-loader file-loader\n")])])]),s("p",[s("code",[t._v("webpack.dev.config.js")]),t._v(" "),s("code",[t._v("rules")]),t._v("增加")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{\n    test: /\\.(png|jpg|jpeg|gif)$/,\n    use: [{\n        loader: 'url-loader',\n        options: {\n            limit: 8192\n        }\n    }]\n}\n")])])]),s("p",[s("code",[t._v("options limit 8192")]),t._v("意思是，小于等于8K的图片会被转成"),s("code",[t._v("base64")]),t._v("编码，直接插入HTML中，减少"),s("code",[t._v("HTTP")]),t._v("请求。")]),t._v(" "),s("p",[t._v("我们来用"),s("code",[t._v("Page1")]),t._v(" 测试下")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd src/pages/Page1\nmkdir images\n")])])]),s("p",[t._v("给"),s("code",[t._v("images")]),t._v("文件夹放一个图片。")]),t._v(" "),s("p",[t._v("修改代码，引用图片")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("src/pages/Page1/Page1.js\nimport React, {Component} from 'react';\n\nimport './Page1.css';\n\nimport image from './images/weibozzz.jpeg';\n\nexport default class Page1 extends Component {\n    render() {\n        return (\n            <div className=\"page-box\">\n                this is page1~\n                <img src={image}/>\n            </div>\n        )\n    }\n}\n")])])]),s("p",[t._v("可以去看看效果啦。")]),t._v(" "),s("h1",{attrs:{id:"按需加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#按需加载"}},[t._v("#")]),t._v(" 按需加载")]),t._v(" "),s("p",[t._v("为什么要实现按需加载？")]),t._v(" "),s("p",[t._v("我们现在看到，打包完后，所有页面只生成了一个"),s("code",[t._v("build.js")]),t._v(",当我们首屏加载的时候，就会很慢。因为他也下载了别的页面的"),s("code",[t._v("js")]),t._v("了哦。")]),t._v(" "),s("p",[t._v("如果每个页面都打包了自己单独的JS，在进入自己页面的时候才加载对应的js，那首屏加载就会快很多哦。")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("react-router 2.0")]),t._v("时代， 按需加载需要用到的最关键的一个函数，就是"),s("code",[t._v("require.ensure()")]),t._v("，它是按需加载能够实现的核心。")]),t._v(" "),s("p",[t._v("在4.0版本，官方放弃了这种处理按需加载的方式，选择了一个更加简洁的处理方式。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://reacttraining.com/react-router/web/guides/code-splitting",target:"_blank",rel:"noopener noreferrer"}},[t._v("传送门"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("根据官方示例，我们开搞")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("npm install bundle-loader --save-dev")])]),t._v(" "),s("li",[t._v("新建"),s("code",[t._v("bundle.js")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('cd src/router\ntouch Bundle.js\nsrc/router/Bundle.js\nimport React, {Component} from \'react\'\n\nclass Bundle extends Component {\n    state = {\n        // short for "module" but that\'s a keyword in js, so "mod"\n        mod: null\n    };\n\n    componentWillMount() {\n        this.load(this.props)\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.load !== this.props.load) {\n            this.load(nextProps)\n        }\n    }\n\n    load(props) {\n        this.setState({\n            mod: null\n        });\n        props.load((mod) => {\n            this.setState({\n                // handle both es imports and cjs\n                mod: mod.default ? mod.default : mod\n            })\n        })\n    }\n\n    render() {\n        return this.props.children(this.state.mod)\n    }\n}\n\nexport default Bundle;\n')])])]),s("ol",[s("li",[t._v("改造路由器")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('src/router/router.js\nimport React from \'react\';\n\nimport {BrowserRouter as Router, Route, Switch, Link} from \'react-router-dom\';\n\nimport Bundle from \'./Bundle\';\n\nimport Home from \'bundle-loader?lazy&name=home!pages/Home/Home\';\nimport Page1 from \'bundle-loader?lazy&name=page1!pages/Page1/Page1\';\nimport Counter from \'bundle-loader?lazy&name=counter!pages/Counter/Counter\';\nimport UserInfo from \'bundle-loader?lazy&name=userInfo!pages/UserInfo/UserInfo\';\n\nconst Loading = function () {\n    return <div>Loading...</div>\n};\n\nconst createComponent = (component) => (props) => (\n    <Bundle load={component}>\n        {\n            (Component) => Component ? <Component {...props} /> : <Loading/>\n        }\n    </Bundle>\n);\n\nconst getRouter = () => (\n    <Router>\n        <div>\n            <ul>\n                <li><Link to="/">首页</Link></li>\n                <li><Link to="/page1">Page1</Link></li>\n                <li><Link to="/counter">Counter</Link></li>\n                <li><Link to="/userinfo">UserInfo</Link></li>\n            </ul>\n            <Switch>\n                <Route exact path="/" component={createComponent(Home)}/>\n                <Route path="/page1" component={createComponent(Page1)}/>\n                <Route path="/counter" component={createComponent(Counter)}/>\n                <Route path="/userinfo" component={createComponent(UserInfo)}/>\n            </Switch>\n        </div>\n    </Router>\n);\n\nexport default getRouter;\n')])])]),s("p",[t._v("现在你可以"),s("code",[t._v("npm start")]),t._v("，打开浏览器，看是不是进入新的页面，都会加载自己的JS的~")]),t._v(" "),s("p",[t._v("但是你可能发现，名字都是"),s("code",[t._v("0.bundle.js")]),t._v("这样子的，这分不清楚是哪个页面的"),s("code",[t._v("js")]),t._v("呀！")]),t._v(" "),s("p",[t._v("我们修改下"),s("code",[t._v("webpack.dev.config.js")]),t._v(",加个"),s("code",[t._v("chunkFilename")]),t._v("。"),s("code",[t._v("chunkFilename")]),t._v("是除了"),s("code",[t._v("entry")]),t._v("定义的入口"),s("code",[t._v("js")]),t._v("之外的"),s("code",[t._v("js")]),t._v("~")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    output: {\n        path: path.join(__dirname, './dist'),\n        filename: 'bundle.js',\n        chunkFilename: '[name].js'\n    }\n")])])]),s("p",[t._v("现在你运行发现名字变成"),s("code",[t._v("home.js")]),t._v(",这样的了。棒棒哒！")]),t._v(" "),s("p",[t._v("那么问题来了"),s("code",[t._v("home")]),t._v("是在哪里设置的？"),s("code",[t._v("webpack")]),t._v("怎么知道他叫"),s("code",[t._v("home")]),t._v("？")]),t._v(" "),s("p",[t._v("其实在这里我们定义了，"),s("code",[t._v("router.js")]),t._v("里面")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import Home from 'bundle-loader?lazy&name=home!pages/Home/Home';\n")])])]),s("p",[t._v("看到没。这里有个"),s("code",[t._v("name=home")]),t._v("。嘿嘿。")]),t._v(" "),s("p",[t._v("**报错： Support for the experimental syntax 'classProperties' isn't currently enabled **")]),t._v(" "),s("p",[s("strong",[t._v("解决： https://github.com/babel/babel/issues/8655")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('// .babelrc 增加此插件\n"plugins": [\n      "@babel/plugin-proposal-class-properties"\n    ]\n')])])]),s("p",[t._v("参考地址：")]),t._v(" "),s("ol",[s("li",[t._v("http://www.jianshu.com/p/8dd98a7028e0")]),t._v(" "),s("li",[t._v("https://github.com/ReactTraining/react-router/blob/master/packages/react-router-dom/docs/guides/code-splitting.md")]),t._v(" "),s("li",[t._v("https://segmentfault.com/a/1190000007949841")]),t._v(" "),s("li",[t._v("http://react-china.org/t/webpack-react-router/10123")]),t._v(" "),s("li",[t._v("https://juejin.im/post/58f9717e44d9040069d06cd6")])]),t._v(" "),s("h1",{attrs:{id:"其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),s("p",[t._v("其他的配置就相对简单，可参考这个 "),s("a",{attrs:{href:"https://github.com/brickspert/blog/issues/1",target:"_blank",rel:"noopener noreferrer"}},[t._v("从零搭建React全家桶框架教程"),s("OutboundLink")],1),t._v("，或者看最新 "),s("a",{attrs:{href:"https://github.com/Weibozzz/webpack-demos",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack配置"),s("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);